# bmstu-dips-lab3
üê¨ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ú–ì–¢–£ –∏–º. –ë–∞—É–º–∞–Ω–∞.

## Fault Tolerance

### –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞

–ù–∞ –±–∞–∑–µ [–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã #2](https://github.com/bmstu-rsoi/lab2-template) —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º—ã, —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–µ
–æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. –ù–∞ Gateway Service –¥–ª—è _–≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π_ —á—Ç–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω Circuit Breaker. –ù–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –ø–∞–º—è—Ç–∏, –∏
   –µ—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–∞ N —Ä–∞–∑, —Ç–æ –≤ N + 1 —Ä–∞–∑ –≤–º–µ—Å—Ç–æ –∑–∞–ø—Ä–æ—Å–∞ —Å—Ä–∞–∑—É –æ—Ç–¥–∞–≤–∞—Ç—å fallback. –ß–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à–æ–π timeout
   –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
2. –ù–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ —Å–¥–µ–ª–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π endpoint `GET /manage/health`, –æ—Ç–¥–∞—é—â–∏–π 200 –û–ö, –æ–Ω –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è
   –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞ (–≤ [Github Actions](.github/workflows/classroom.yml) –≤ —Å–∫—Ä–∏–ø—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö
   —Å–µ—Ä–≤–∏—Å–æ–≤ [wait-script.sh](scripts/wait-script.sh) –∏ –≤ —Ç–µ—Å—Ç–∞—Ö [test-script.sh](scripts/test-script.sh)).
   ```shell
   "$path"/wait-for.sh -t 120 "http://localhost:$port/manage/health" -- echo "Host localhost:$port is active"
   ```
4. –í —Å–ª—É—á–∞–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ), –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è fallback-–æ—Ç–≤–µ—Ç. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç
   —Å–∏—Ç—É–∞—Ü–∏–∏, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å:
    * –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç –∏–ª–∏ –º–∞—Å—Å–∏–≤;
    * –æ–±—ä–µ–∫—Ç, —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –ø–æ–ª–µ–º (`uid` –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–º), –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –∏–¥–µ—Ç —Å–≤—è–∑—å —Å –¥—Ä—É–≥–æ–π —Å–∏—Å—Ç–µ–º–æ–π;
    * default —Å—Ç—Ä–æ–∫–∞ (–µ—Å–ª–∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è —Ç–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π).
5. –í –∑–∞–¥–∞–Ω–∏–∏ –æ–ø–∏—Å–∞–Ω—ã –¥–≤–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∏–∑–º–µ–Ω—è—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∏—Å—Ç–µ–º. –í —Å–ª—É—á–∞–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ–¥–Ω–æ–π –∏–∑ —Å–∏—Å—Ç–µ–º,
   —É—á–∞—Å—Ç–≤—É—é—â–∏—Ö –≤ —ç—Ç–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
    1. –æ—Ç–∫–∞—Ç –≤—Å–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏;
    2. –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ç–≤–µ—Ç –æ–± —É—Å–ø–µ—à–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∞ –Ω–∞ Gateway Service –ø–æ—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –≤
       –æ—á–µ—Ä–µ–¥—å –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
6. –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≥–æ–Ω–æ–≤ —Ç–µ—Å—Ç–æ–≤ –≤ —Ñ–∞–π–ª–µ [autograding.json](.github/classroom/autograding.json)
   –∏ [classroom.yml](.github/workflows/classroom.yml) –∑–∞–º–µ–Ω–∏—Ç—å `<variant>` –Ω–∞ –≤–∞—à –≤–∞—Ä–∏–∞–Ω—Ç.
7. –í [docker-compose.yml](docker-compose.yml) –ø—Ä–æ–ø–∏—Å–∞—Ç—å —Å–±–æ—Ä–∫—É –∏ –∑–∞–ø—É—Å–∫ docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
8. –ö–æ–¥ —Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞ Github, –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Github Actions.
9. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≤–µ—Ä–Ω—É—Ç –≤ docker.
10. –í classroom.yml –¥–æ–ø–∏—Å–∞—Ç—å —à–∞–≥–∏ –Ω–∞ —Å–±–æ—Ä–∫—É, –ø—Ä–æ–≥–æ–Ω unit-—Ç–µ—Å—Ç–æ–≤.

### –ü–æ—è—Å–Ω–µ–Ω–∏—è

1. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Postgres –≤ docker.
2. –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –æ—Å—Ç–∞–µ—Ç—Å—è –∫–∞–∫ –≤ [–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã #2](https://github.com/bmstu-rsoi/lab2-template).
3. –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—á–µ—Ä–µ–¥–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å language native —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, BlockingQueue –¥–ª—è Java), –ª–∏–±–æ
   –∫–∞–∫—É—é-—Ç–æ –≥–æ—Ç–æ–≤—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ç–∏–ø–∞ RabbitMQ, Redis, ZeroMQ –∏ —Ç.–ø. –ö—Ä–∞–π–Ω–µ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—É—é –±–∞–∑—É
   –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ —Å—Ä–µ–¥—Å—Ç–≤–æ —ç–º—É–ª—è—Ü–∏–∏ –æ—á–µ—Ä–µ–¥–∏.
4. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω—é—é –æ—á–µ—Ä–µ–¥—å –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –µ–µ –≤ docker.
5. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ docker, —ç—Ç–æ –¥–µ–ª–∞–µ—Ç
   —Å–∫—Ä–∏–ø—Ç [test-script.sh](scripts/test-script.sh). –°–∫—Ä–∏–ø—Ç –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞, —Ç.–∫. –æ–Ω –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –ø–∞–ø–∫–µ
   postman –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º.
   ```shell
   # –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è:
   # * <variant> ‚Äì –Ω–æ–º–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ (v1 | v2 | v3 | v4 )
   # * <service> ‚Äì –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –≤ Docker Compose
   # * <port>    ‚Äì –ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–ø—É—â–µ–Ω —Å–µ—Ä–≤–∏—Å
   $ scripts/test-script.sh <variant> <service> <port>
   ```

### –ü—Ä–∏–µ–º –∑–∞–¥–∞–Ω–∏—è

1. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–∏—è —É –≤–∞—Å —Å–æ–∑–¥–∞–µ—Ç—Å—è fork —ç—Ç–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
2. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—Å–µ —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∞—Ç—Å—è, –≤ Github Classroom –Ω–∞ Dashboard –±—É–¥–µ—Ç –æ—Ç–º–µ—á–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
   —Ç–µ—Å—Ç–æ–≤.

### –í–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–¥–∞–Ω–∏–π

–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∑–∞–¥–∞–Ω–∏–π –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ [–õ–† #2](https://github.com/bmstu-rsoi/lab2-template).

1. [Flight Booking System](v1/README.md)